<!DOCTYPE html>
<html>

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="title" content="How to select an Object in 3D Space | MonoGame ">

    <title>How to select an Object in 3D Space | MonoGame </title>
<meta name="description" content="Demonstrates how to check whether the mouse (or touch location) is positioned over a 3D object by creating a ray starting at the camera&#39;s near clipping plane and ending at its far clipping plane.">

    <meta name="og:url" content="https://monogame.net/articles/monogame/howto/input/HowTo_DetectClicked3DObject.html"><meta name="og:type" content="website">
    <meta name="og:title" content="How to select an Object in 3D Space | MonoGame ">
    <meta name="og:description" content="Demonstrates how to check whether the mouse (or touch location) is positioned over a 3D object by creating a ray starting at the camera&#39;s near clipping plane and ending at its far clipping plane.">
    <meta name="og:image" content="https://monogame.net/images/social_embed_image.png">

    <meta name="twitter:card" content="summary_large_image">
    <meta property="twitter:domain" content="monogame.net">
    <meta property="twitter:url" content="https://monogame.net/articles/monogame/howto/input/HowTo_DetectClicked3DObject.html">
    <meta name="twitter:title" content="How to select an Object in 3D Space | MonoGame ">
    <meta name="twitter:description" content="Demonstrates how to check whether the mouse (or touch location) is positioned over a 3D object by creating a ray starting at the camera&#39;s near clipping plane and ending at its far clipping plane.">
    <meta name="twitter:image" content="https://monogame.net/images/social_embed_image.png">

    <link rel="icon" href="/favicon.png">
    <link rel="stylesheet" href="../../../../public/docfx.min.css">
    <link rel="stylesheet" href="../../../../public/main.css">
    <meta name="docfx:navrel" content="../../../../toc.html">
    <meta name="docfx:tocrel" content="toc.html">




<meta name="docfx:docurl" content="https://github.com/SimonDarksideJ/monogame.github.io/blob/feature/docsmigration/documentation/articles/monogame/howto/input/HowTo_DetectClicked3DObject.md/#L1">
    <meta name="loc:inThisArticle" content="In this article">
    <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
    <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
    <meta name="loc:tocFilter" content="Filter by title">
    <meta name="loc:nextArticle" content="Next">
    <meta name="loc:prevArticle" content="Previous">
    <meta name="loc:themeLight" content="Light">
    <meta name="loc:themeDark" content="Dark">
    <meta name="loc:themeAuto" content="Auto">
    <meta name="loc:changeTheme" content="Change theme">
    <meta name="loc:copy" content="Copy">    

  </head>

      <script type="module" src="./../../../../public/docfx.min.js"></script>
  <script>
      const theme = localStorage.getItem('theme') || 'auto'
      document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
  </script>
  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
        <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
            <div class="container-xxl mx-auto flex-nowrap">
                <a class="navbar-brand" href="../../../../index.html">
                <img id="logo" class="mg-logo svg" style="height: 36px; display: inline-block;" alt="">
            
                </a>
                <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
                <i class="bi bi-three-dots"></i>
                </button>
                <div class="collapse navbar-collapse" id="navpanel">
                <div id="navbar">
                </div>
                </div>
            </div>
        </nav>
    </header>
    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="selecting-an-object-in-3d-space">Selecting an Object in 3D Space</h1>

<p>Demonstrates how to check whether the mouse (or touch location) is positioned over a 3D object by creating a ray starting at the camera's near clipping plane and ending at its far clipping plane.</p>
<div class="TIP">
<h5>Tip</h5>
<p>This example applies most directly to Windows development where mice are ubiquitous and Mobile where a touch replaces a mouse.</p>
</div>
<p>Because the <a class="xref" href="../../../../api/Microsoft.Xna.Framework.Input.Mouse.html">Mouse</a> class and <a class="xref" href="../../../../api/Microsoft.Xna.Framework.Input.MouseState.html">MouseState</a> structure do provide limited functionality on Windows Phone, this sample should work, as is, on that platform as well. However, a better solution on Windows Phone would be to substitute a call to the <a class="xref" href="../../../../api/Microsoft.Xna.Framework.Input.Touch.TouchPanel.html#Microsoft_Xna_Framework_Input_Touch_TouchPanel_GetState">TouchPanel.GetState</a> method for the call to the <a class="xref" href="../../../../api/Microsoft.Xna.Framework.Input.Mouse.html#Microsoft_Xna_Framework_Input_Mouse_GetState">Mouse.GetState</a> method in order to retrieve alternative X and Y coordinates from a Windows Phone touch screen. In general, games and other applications designed for Windows Phone should use the <a class="xref" href="../../../../api/Microsoft.Xna.Framework.Input.Touch.TouchPanel.html">TouchPanel</a> class to retrieve user input.</p>
<p>As written, this sample is least applicable to consoles, although the technique of creating a ray and then keeping track of the closest object that intersects the ray remains potentially useful.</p>
<h2 id="detecting-whether-a-user-clicked-a-3d-object">Detecting Whether a User Clicked a 3D Object</h2>
<blockquote>
<p>If you replace <strong>Mouse</strong> with <strong>Touch</strong>, you can apply this method to Mobiles too.</p>
</blockquote>
<h3 id="to-check-whether-the-mouse-is-positioned-over-a-3d-object">To check whether the mouse is positioned over a 3D object</h3>
<ol>
<li><p>Get the current state of the mouse by using <a class="xref" href="../../../../api/Microsoft.Xna.Framework.Input.Mouse.html#Microsoft_Xna_Framework_Input_Mouse_GetState">GetState</a>.</p>
<pre><code class="lang-csharp">MouseState mouseState = Mouse.GetState();
</code></pre>
</li>
<li><p>Get the current screen coordinates of the mouse from <a class="xref" href="../../../../api/Microsoft.Xna.Framework.Input.MouseState.html#Microsoft_Xna_Framework_Input_MouseState_X">X</a> and <a class="xref" href="../../../../api/Microsoft.Xna.Framework.Input.MouseState.html#Microsoft_Xna_Framework_Input_MouseState_Y">Y</a>.</p>
<pre><code class="lang-csharp">int mouseX = mouseState.X;
int mouseY = mouseState.Y;
</code></pre>
</li>
<li><p>Using <a class="xref" href="../../../../api/Microsoft.Xna.Framework.Graphics.Viewport.html">Viewport.Unproject</a>, determine points in world space on the near and far clipping planes. For the point on the near plane, pass a source vector with x and y set to the mouse position, and z set to 0.</p>
</li>
<li><p>For the point on the far plane, pass a source vector with x and y set to the mouse position, and z set to 1.</p>
</li>
<li><p>Create a translation matrix for a point that is the origin, (0,0,0).</p>
</li>
<li><p>For both points, pass <a class="xref" href="../../../../api/Microsoft.Xna.Framework.Graphics.Viewport.html">Unproject</a> the current projection matrix, the view matrix.</p>
<pre><code class="lang-csharp">Vector3 nearsource = new Vector3((float)mouseX, (float)mouseY, 0f);
Vector3 farsource = new Vector3((float)mouseX, (float)mouseY, 1f);

Matrix world = Matrix.CreateTranslation(0, 0, 0);

Vector3 nearPoint = GraphicsDevice.Viewport.Unproject(nearsource,
    proj, view, world);

Vector3 farPoint = GraphicsDevice.Viewport.Unproject(farsource,
    proj, view, world);
</code></pre>
</li>
<li><p>Create a <a class="xref" href="../../../../api/Microsoft.Xna.Framework.Ray.html">Ray</a> whose origin is at the near point and whose direction points to the far point.</p>
<pre><code class="lang-csharp">// Create a ray from the near clip plane to the far clip plane.
Vector3 direction = farPoint - nearPoint;
direction.Normalize();
Ray pickRay = new Ray(nearPoint, direction);
</code></pre>
</li>
<li><p>Loop through each object in the scene using the <strong>Intersects</strong> method to check whether the <a class="xref" href="../../../../api/Microsoft.Xna.Framework.Ray.html">Ray</a> intersects each object.</p>
</li>
<li><p>If the <a class="xref" href="../../../../api/Microsoft.Xna.Framework.Ray.html">Ray</a> intersects an object, check whether it is the closest object intersected so far. If it is, store the object and the distance at which it was intersected, replacing any previously stored object.</p>
</li>
<li><p>When you completely loop through the objects, the last object stored will be the closest object underneath the area the user clicked.</p>
</li>
</ol>
<h2 id="see-also">See Also</h2>
<p><a href="../graphics/HowTo_RotateMoveCamera.html">Rotating and Moving the Camera</a></p>
<hr>
<p>© 2012 Microsoft Corporation. All rights reserved.</p>
<p>© 2023 The MonoGame Foundation.</p>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/SimonDarksideJ/monogame.github.io/blob/feature/docsmigration/documentation/articles/monogame/howto/input/HowTo_DetectClicked3DObject.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>


      <section class="container-xxl">
          <footer class="border-top my-5 pt-5">
              <div class="row justify-content-between">
                  <div class="col-6 col-lg-3 mb-3">
                      <h5>MonoGame</h5>
                      <ul class="nav flex-column">
                          <li class="nav-item mb-2">
                              <a href="/articles/" class="p-0">Documentation</a>
                          </li>
                          <li class="nav-item mb-2">
                              <a href="/api/" class="p-0">API Reference</a>
                          </li>
                          <li class="nav-item mb-2">
                              <a href="/showcase/" class="p-0">Showcase</a>
                          </li>
                          <li class="nav-item mb-2">
                              <a href="/about/" class="p-0">About</a>
                          </li>
                          <li class="nav-item mb-2">
                              <a href="/foundation/" class="p-0">Foundation Bylaws</a>
                          </li>
                      </ul>
                  </div>
                  <div class="col-6 col-lg-3 mb-3">
                      <h5>Get Involved</h5>
                      <ul class="nav flex-column">
                          <li class="nav-item mb-2">
                              <a href="https://github.com/MonoGame/MonoGame" class="p-0">Source Code</a>
                          </li>
                          <li class="nav-item mb-2">
                              <a href="https://github.com/MonoGame/monogame.github.io/blob/main/CONTRIBUTING.md" class="p-0">Documentation</a>
                          </li>
                          <li class="nav-item mb-2">
                              <a href="https://github.com/MonoGame/MonoGame/issues/new/choose" class="p-0">Report
                                  Issues</a>
                          </li>
                          <li class="nav-item mb-2">
                              <a href="https://www.patreon.com/MonoGame" class="p-0">Patreon</a>
                          </li>
                      </ul>
                  </div>
                  <div class="col-6 col-lg-3 mb-3">
                      <h5>Public Relations</h5>
                      <ul class="nav flex-column">
                          <li class="nav-item mb-2">
                              <a href="/blog/" class="p-0">Blog</a>
                          </li>
                          <li class="nav-item mb-2">
                              <a href="https://community.monogame.net" class="p-0">Community</a>
                          </li>
                          <li class="nav-item mb-2">
                              <a href="/presskit/" class="p-0">Press Kit</a>
                          </li>
                      </ul>
                  </div>
                  <div class="col-6 col-lg-3 mb-3">
                      <h3 class="fw-bold"><a href="/about/#contact-us">Contact Us</a>
                  </h3></div>
              </div>

              <div class="d-flex flex-column flex-sm-row justify-content-between align-items-center gap-3 py-4 my-4">
                  <div>
                      Copyright © 2009-2024 MonoGame Foundation, Inc. <br> Designed with
                      <span class="text-danger">❤</span>
                      by
                      <a href="https://github.com/MonoGame/monogame.github.io/graphs/contributors">MonoGame Community</a>
                  </div>
                  <div class="d-flex justify-content-between gap-3">
                      <a class="mg-social-link hide-external-icon" href="https://github.com/monogame/monogame" title="GitHub">
                          <i class="bi bi-github"></i>
                      </a>
                      <a class="mg-social-link hide-external-icon" href="https://www.patreon.com/MonoGame" title="Patreon">
                          <i class="bi bi-p-circle-fill"></i>
                      </a>                    
                      <a class="mg-social-link hide-external-icon" href="https://discord.gg/monogame" title="Discord">
                          <i class="bi bi-discord"></i>
                      </a>    
                      <a class="mg-social-link hide-external-icon" href="https://www.youtube.com/MonoGame" title="YouTube">
                          <i class="bi bi-youtube"></i>
                      </a>  
                      <a class="mg-social-link hide-external-icon" href="https://www.reddit.com/r/monogame/" title="Reddit">
                          <i class="bi bi-reddit"></i>
                      </a>
                      <a class="mg-social-link hide-external-icon" href="https://www.facebook.com/monogamecommunity" title="Facebook">
                          <i class="bi bi-facebook"></i>
                      </a>
                      <a class="mg-social-link hide-external-icon" href="https://twitter.com/MonoGameTeam" title="Twitter">
                          <i class="bi bi-twitter"></i>
                      </a>     
                      <a class="mg-social-link hide-external-icon" href="https://monogame.net/blog/feed.xml" title="MonoGame Blog">
                          <i class="bi bi-rss-fill"></i>
                      </a>                                                   
                  </div>
              </div>
          </footer>
      </section>
  </body>
</html>
